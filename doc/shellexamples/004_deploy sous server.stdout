StateLocation: /Users/ssalisbury/.local/share/sous/state
Server: ""
SiblingURLs: {}
BuildStateDir: ""
Docker:
  RegistryHost: 192.168.99.100:5000
  DatabaseDriver: sqlite3_sous
  DatabaseConnection: file:dummy.db?mode=memory&cache=shared
User:
  Name: ""
  Email: ""
Docker:
  RegistryHost: 192.168.99.100:5000
/tmp/sous-work/sous-server /tmp/sous-work
Source: 192.168.99.100/2222/repos/sous-server
Owners: []
Kind: http-service
Deployments:
  left:
    Resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    NumInstances: 1
    Volumes: []
    Version: 0.0.0
  right:
    Resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    NumInstances: 1
    Volumes: []
    Version: 0.0.0
source: 192.168.99.100/2222/repos/sous-server
owners: []
kind: http-service
deployments:
  left:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    numinstances: 1
    volumes: []
    version: 0.0.0
  right:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    numinstances: 1
    volumes: []
    version: 0.0.0


source: 192.168.99.100/2222/repos/sous-server
owners:
- test@test.com
kind: http-service
deployments:
  left:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    env:
      GDM_REPO: ssh://root@192.168.99.100:2222/repos/gdm
      SOUS_DOCKER_REGISTRY_HOST: 192.168.99.100:5000
    numinstances: 1
    volumes: []
    version: 0.0.0
  right:
    resources:
      cpus: "0.1"
      memory: "100"
      ports: "1"
    env:
      GDM_REPO: ssh://root@192.168.99.100:2222/repos/gdm
      SOUS_DOCKER_REGISTRY_HOST: 192.168.99.100:5000
    numinstances: 1
    volumes: []
    version: 0.0.0

FROM golang:1.7

# Add deploy key.
COPY ./key_sous@example.com /root/.ssh/id_rsa
COPY ./known_hosts /root/.ssh/known_hosts
COPY ./docker.crt /docker.crt

RUN chmod -R og-rwx /root/.ssh

COPY ./sous /go/bin/sous

COPY main.go /go/src/github.com/opentable/sous-server/
WORKDIR /go/src/github.com/opentable/sous-server
RUN go install -v

# Run sous server.
# NOTE: You must have set PORT0, GDM_REPO
CMD /go/bin/sous-server
.
..
.git
Dockerfile
docker.crt
key_sous@example.com
main.go
sous
sous-server.yaml
[master 754d665] Adding ephemeral files
 3 files changed, 30 insertions(+)
 create mode 100644 key_sous@example.com
 create mode 100644 known_hosts
 create mode 100755 sous
  (Sous)> running docker build .
  (Sous)>   Sending build context to Docker daemon 30.73 MB
  (Sous)>   Step 1 : FROM golang:1.7
  (Sous)>    ---> 6639f812dbc7
  (Sous)>   Step 2 : COPY ./key_sous@example.com /root/.ssh/id_rsa
  (Sous)>    ---> Using cache
  (Sous)>    ---> 81919f889962
  (Sous)>   Step 3 : COPY ./known_hosts /root/.ssh/known_hosts
  (Sous)>    ---> 3664b3c12fce
  (Sous)>   Removing intermediate container 149a71479d9c
  (Sous)>   Step 4 : COPY ./docker.crt /docker.crt
  (Sous)>    ---> 3f0ad63448f4
  (Sous)>   Removing intermediate container 5889cdbee1b4
  (Sous)>   Step 5 : RUN chmod -R og-rwx /root/.ssh
  (Sous)>    ---> Running in ee2d1421faf8
  (Sous)>    ---> 78208bc6ca92
  (Sous)>   Removing intermediate container ee2d1421faf8
  (Sous)>   Step 6 : COPY ./sous /go/bin/sous
  (Sous)>    ---> 995f9b2be822
  (Sous)>   Removing intermediate container 620eeadcbcfe
  (Sous)>   Step 7 : COPY main.go /go/src/github.com/opentable/sous-server/
  (Sous)>    ---> e4df34c8af24
  (Sous)>   Removing intermediate container 1b57e86db4f4
  (Sous)>   Step 8 : WORKDIR /go/src/github.com/opentable/sous-server
  (Sous)>    ---> Running in 3e000da7d67e
  (Sous)>    ---> 4776c7d1b279
  (Sous)>   Removing intermediate container 3e000da7d67e
  (Sous)>   Step 9 : RUN go install -v
  (Sous)>    ---> Running in 22d3ef48df64
  (Sous)>   [91mgithub.com/opentable/sous-server
  (Sous)>   [0m ---> bdf9d596e0b1
  (Sous)>   Removing intermediate container 22d3ef48df64
  (Sous)>   Step 10 : CMD /go/bin/sous-server
  (Sous)>    ---> Running in 9db1eac9f5bd
  (Sous)>    ---> 3b3ca40e5dd6
  (Sous)>   Removing intermediate container 9db1eac9f5bd
  (Sous)>   Successfully built 3b3ca40e5dd6
  (Sous)> running docker build -t 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2 -t 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:754d6653c6ff2a94bdcc02a333e08985761b5ad1 -
  (Sous)>   Sending build context to Docker daemon 2.048 kB
  (Sous)>   Step 1 : FROM 3b3ca40e5dd6
  (Sous)>    ---> 3b3ca40e5dd6
  (Sous)>   Step 2 : LABEL com.opentable.sous.repo_offset "" com.opentable.sous.repo_url "192.168.99.100/2222/repos/sous-server" com.opentable.sous.revision "754d6653c6ff2a94bdcc02a333e08985761b5ad1" com.opentable.sous.version "0.0.2" com.opentable.sous.advisories "dirty workspace"
  (Sous)>    ---> Running in 9c72d1376267
  (Sous)>    ---> b99766d3d580
  (Sous)>   Removing intermediate container 9c72d1376267
  (Sous)>   Successfully built b99766d3d580
  (Sous)> running docker push 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2
  (Sous)>   The push refers to a repository [192.168.99.100:5000/192.168.99.100/2222/repos/sous-server]
  (Sous)>   27a15148f23f: Preparing
  (Sous)>   4ba17bd34217: Preparing
  (Sous)>   5aab58b85ce1: Preparing
  (Sous)>   9762abc4e746: Preparing
  (Sous)>   fc81061caadf: Preparing
  (Sous)>   7315c86e1059: Preparing
  (Sous)>   4e7ac1e84a1a: Preparing
  (Sous)>   8b77aafa7afb: Preparing
  (Sous)>   988a4cf7bfad: Preparing
  (Sous)>   e6769ace411a: Preparing
  (Sous)>   779900daf86c: Preparing
  (Sous)>   53c779688d06: Preparing
  (Sous)>   60a0858edcd5: Preparing
  (Sous)>   b6ca02dfe5e6: Preparing
  (Sous)>   7315c86e1059: Waiting
  (Sous)>   4e7ac1e84a1a: Waiting
  (Sous)>   8b77aafa7afb: Waiting
  (Sous)>   988a4cf7bfad: Waiting
  (Sous)>   e6769ace411a: Waiting
  (Sous)>   779900daf86c: Waiting
  (Sous)>   53c779688d06: Waiting
  (Sous)>   60a0858edcd5: Waiting
  (Sous)>   b6ca02dfe5e6: Waiting
  (Sous)>   fc81061caadf: Pushed
  (Sous)>   9762abc4e746: Pushed
  (Sous)>   4ba17bd34217: Pushed
  (Sous)>   4e7ac1e84a1a: Layer already exists
  (Sous)>   27a15148f23f: Pushed
  (Sous)>   8b77aafa7afb: Layer already exists
  (Sous)>   988a4cf7bfad: Layer already exists
  (Sous)>   53c779688d06: Layer already exists
  (Sous)>   e6769ace411a: Layer already exists
  (Sous)>   779900daf86c: Layer already exists
  (Sous)>   7315c86e1059: Pushed
  (Sous)>   60a0858edcd5: Layer already exists
  (Sous)>   5aab58b85ce1: Pushed
  (Sous)>   b6ca02dfe5e6: Layer already exists
  (Sous)>   0.0.2: digest: sha256:97dce30d15bd40a72c1f7147dee2a5ab9f786b4484bd94689f41afbb0f013128 size: 3252
  (Sous)> running docker push 192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:754d6653c6ff2a94bdcc02a333e08985761b5ad1
  (Sous)>   The push refers to a repository [192.168.99.100:5000/192.168.99.100/2222/repos/sous-server]
  (Sous)>   27a15148f23f: Preparing
  (Sous)>   4ba17bd34217: Preparing
  (Sous)>   5aab58b85ce1: Preparing
  (Sous)>   9762abc4e746: Preparing
  (Sous)>   fc81061caadf: Preparing
  (Sous)>   7315c86e1059: Preparing
  (Sous)>   4e7ac1e84a1a: Preparing
  (Sous)>   8b77aafa7afb: Preparing
  (Sous)>   988a4cf7bfad: Preparing
  (Sous)>   e6769ace411a: Preparing
  (Sous)>   779900daf86c: Preparing
  (Sous)>   53c779688d06: Preparing
  (Sous)>   60a0858edcd5: Preparing
  (Sous)>   b6ca02dfe5e6: Preparing
  (Sous)>   7315c86e1059: Waiting
  (Sous)>   4e7ac1e84a1a: Waiting
  (Sous)>   8b77aafa7afb: Waiting
  (Sous)>   988a4cf7bfad: Waiting
  (Sous)>   e6769ace411a: Waiting
  (Sous)>   779900daf86c: Waiting
  (Sous)>   53c779688d06: Waiting
  (Sous)>   60a0858edcd5: Waiting
  (Sous)>   b6ca02dfe5e6: Waiting
  (Sous)>   fc81061caadf: Layer already exists
  (Sous)>   5aab58b85ce1: Layer already exists
  (Sous)>   9762abc4e746: Layer already exists
  (Sous)>   7315c86e1059: Layer already exists
  (Sous)>   4ba17bd34217: Layer already exists
  (Sous)>   27a15148f23f: Layer already exists
  (Sous)>   4e7ac1e84a1a: Layer already exists
  (Sous)>   8b77aafa7afb: Layer already exists
  (Sous)>   e6769ace411a: Layer already exists
  (Sous)>   b6ca02dfe5e6: Layer already exists
  (Sous)>   53c779688d06: Layer already exists
  (Sous)>   988a4cf7bfad: Layer already exists
  (Sous)>   779900daf86c: Layer already exists
  (Sous)>   60a0858edcd5: Layer already exists
  (Sous)>   754d6653c6ff2a94bdcc02a333e08985761b5ad1: digest: sha256:97dce30d15bd40a72c1f7147dee2a5ab9f786b4484bd94689f41afbb0f013128 size: 3252
  (Sous)> [recording "192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2" as the docker name for "192.168.99.100/2222/repos/sous-server,0.0.2+754d6653c6ff2a94bdcc02a333e08985761b5ad1"]
Built: "192.168.99.100:5000/192.168.99.100/2222/repos/sous-server:0.0.2"
Advisories:
  dirty workspace
Elapsed: 3.160129491s
Updated global manifest.

Updated global manifest.

/tmp/sous-work
